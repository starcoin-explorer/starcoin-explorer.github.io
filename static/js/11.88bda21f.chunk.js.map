{"version":3,"sources":["rootStore/loading/selector.ts","utils/sdk.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","rootStore/router/actions.ts","modules/Search/index.tsx","modules/Search/adapter.ts"],"names":["createLoadingSelector","actions","state","some","action","get","provider","providers","JsonrpcProvider","process","getAddressData","hash","a","getResource","result","getBalancesData","getBalances","getEpochData","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","pushLocation","params","abs","type","path","Index","props","computedMatch","isHex","getBlock","getTransaction","getAddressTransactions","parseInt","getBlockByHeight","height","data","url","classes","t","block","transaction","addressTransactions","Loading","showNone","hits","length","_id","Helmet","Grid","className","root","container","justify","item","xs","md","lg","Card","card","Typography","variant","headline","PureComponent","defaultProps","withStyles","createStyles","padding","alignItems","display","flexDirection","justifyContent","paddingBottom","withTranslation","currentSelectorBlocks","storeBlocks","selector","actionsBlocks","currentSelectorTransactions","storeTransactions","actionsTransactions","loadingSelector","typesBlocks","typesTransactions","createSelector","currentBlocks","currentTransactions","loading","connect"],"mappings":"+HACA,sBAMeA,IAJe,SAACC,GAAD,OAAkB,SAACC,GAC/C,OAAOD,EAAQE,MAAK,SAACC,GAAD,OAAiBC,IAAIH,EAAD,kBAAmBE,U,oKCAvDE,EAAW,I,OAAIC,EAAUC,iBADfC,4BAYT,SAAeC,EAAtB,kC,4CAAO,WAA8BC,GAA9B,eAAAC,EAAA,+EAEkBN,EAASO,YAAYF,EAAM,yBAF7C,cAEGG,EAFH,yBAGIA,GAHJ,0DAKI,GALJ,0D,sBASA,SAAeC,EAAtB,kC,4CAAO,WAA+BJ,GAA/B,eAAAC,EAAA,+EAEkBN,EAASU,YAAYL,GAFvC,cAEGG,EAFH,yBAGIA,GAHJ,0DAKI,GALJ,0D,sBASA,SAAeG,IAAtB,+B,4CAAO,4BAAAL,EAAA,+EAEkBN,EAASO,YAAY,MAAO,qBAF9C,cAEGC,EAFH,yBAGIA,GAHJ,0DAKI,GALJ,0D,yDCjCP,SAASI,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,OA/BZ,mC,qDCAO,SAASC,EAAaC,GAA2B,IAAdC,EAAa,wDACrD,MAAO,CACLC,KAAM,gBACNF,OAAQ,CACNG,KAAMH,EACNC,QALN,mC,qQC0CMG,E,kLAeF,IAAMnC,EAAOwB,KAAKY,MAAMC,cAAcN,OAAO/B,KACzCsC,YAAMtC,IACRwB,KAAKY,MAAMG,SAAS,CAAEvC,SACtBwB,KAAKY,MAAMI,eAAe,CAAExC,SAC5BwB,KAAKY,MAAMK,uBAAuB,CAAEzC,UAC3B0C,SAAS1C,EAAM,KAAO,GAC/BwB,KAAKY,MAAMO,iBAAiB,CAAEC,OAAQF,SAAS1C,EAAM,Q,qCAI1CA,GAAe,IAAD,OAC3BD,YAAeC,GAAMoB,MAAK,SAAAyB,GACxB,GAAIA,GACEnD,IAAImD,EAAM,uBAAwB,MAAQ7C,EAAM,CAClD,IAAM8C,EAAG,mBAAe9C,GACxB,EAAKoC,MAAMN,aAAagB,S,+BAMtB,IAOJA,EAPG,EACgBtB,KAAKY,MAApBW,EADD,EACCA,QAASC,EADV,EACUA,EACXhD,EAAOwB,KAAKY,MAAMC,cAAcN,OAAO/B,KAFtC,EAG6CwB,KAAKY,MAAjDa,EAHD,EAGCA,MAAOC,EAHR,EAGQA,YAAaC,EAHrB,EAGqBA,oBAC5B,GAAIb,YAAMtC,MAAWiD,IAAUC,IAAgBC,GAC7C,OAAO,cAACC,EAAA,EAAD,IAGT,IAAIC,GAAW,EAqBf,OAnBIJ,GAASA,EAAMK,KAAKA,KAAKC,OAAS,IAChCjB,YAAMtC,IAASN,IAAIuD,EAAO,sBAAwBjD,EACpD8C,EAAG,yBAAqBG,EAAMK,KAAKA,KAAK,GAAGE,KAClC9D,IAAIuD,EAAO,0CAAsCpB,KAAe7B,IACzE8C,EAAG,yBAAqB9C,KAGxBsC,YAAMtC,IAASkD,GAAeA,EAAYI,KAAKA,KAAKC,OAAS,IAC3D7D,IAAIwD,EAAa,sBAAwBlD,EAC3C8C,EAAG,+BAA2BI,EAAYI,KAAKA,KAAK,GAAGE,KAEvDH,GAAW,GAGXf,YAAMtC,IAASmD,GAAuBA,EAAoBG,KAAKA,KAAKC,OAAS,IAC/E/B,KAAKzB,eAAeC,GACpBqD,GAAW,GAGTP,GACFtB,KAAKY,MAAMN,aAAagB,GACjB,OAGJA,GAAOO,EAER,gCACE,cAACI,EAAA,EAAD,UACE,0CAEF,cAACC,EAAA,EAAD,CAAMC,UAAWZ,EAAQa,KAAMC,WAAS,EAACC,QAAQ,SAAjD,SACE,cAACJ,EAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAA9B,SACE,eAACC,EAAA,EAAD,CAAMR,UAAWZ,EAAQqB,KAAzB,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKX,UAAWZ,EAAQwB,SAA5C,SACGvB,EAAE,yBAEL,cAACqB,EAAA,EAAD,CAAYC,QAAQ,YAApB,SACGtB,EAAE,yCAQV,cAACI,EAAA,EAAD,Q,GA3FSoB,iBAAdrC,EAEGsC,aAAe,CACpBpC,cAAe,GACfY,MAAO,KACPV,SAAU,aACVW,YAAa,KACbV,eAAgB,aAChBW,oBAAqB,KACrBV,uBAAwB,aACxBE,iBAAkB,aAClBb,aAAc,cAoFH4C,mBA7HG,kBAAMC,YAAa,CACnCf,KAAM,CACJgB,QAAS,IAEXR,KAAM,CACJS,WAAY,SACZC,QAAS,OACTC,cAAe,SACfC,eAAgB,SAChBJ,QAAS,IAEXL,SAAU,CACRU,cAAe,OAiHJP,CAAsBQ,cAAkB/C,IC/HrCgD,EAAkDC,IAA5DC,SAA0CC,EAAkBF,IAA3B9F,QACvBiG,EAA8DC,IAAxEH,SAAgDI,EAAwBD,IAAjClG,QAEzCoG,EAAkBrG,YAAsB,CAACsG,IAAuBA,IAAiCC,IAAmCA,MAEpIP,EAAWQ,YACfV,EACAI,EACAG,GACA,SAACI,EAAeC,EAAqBC,GAArC,MAAkD,CAChD/C,MAAO6C,EAAc7C,MACrBC,YAAa6C,EAAoB7C,YACjCC,oBAAqB4C,EAAoB5C,oBACzC6C,cAIWC,sBAAQZ,EAAU,CAC/B9C,SAAU+C,EAAc/C,SACxBC,eAAgBiD,EAAoBjD,eACpCC,uBAAwBgD,EAAoBhD,uBAC5CE,iBAAkB2C,EAAc3C,iBAChCb,kBALamE,CAMZ9D","file":"static/js/11.88bda21f.chunk.js","sourcesContent":["import { createSelector } from 'reselect';\nimport get from 'lodash/get';\n\nconst createLoadingSelector = (actions: any) => (state: any) => {\n  return actions.some((action: any) => get(state, `loading.${action}`));\n};\n\nexport default createLoadingSelector;","// https://www.npmjs.com/package/@starcoin/starcoin\nimport { providers } from '@starcoin/starcoin';\n\nconst nodeUrl = process.env.REACT_APP_STARCOIN_NODE_URL;\nconst provider = new providers.JsonrpcProvider(nodeUrl);\n\nexport async function getTxnData(txnHash: string) {\n  try {\n    const result = await provider.getTransaction(txnHash);\n    return result;\n  } catch (error: any) {\n    return false;\n  }\n}\n\nexport async function getAddressData(hash: string) {\n  try {\n    const result = await provider.getResource(hash, '0x1::Account::Account');\n    return result;\n  } catch (error: any) {\n    return false;\n  }\n}\n\nexport async function getBalancesData(hash: string) {\n  try {\n    const result = await provider.getBalances(hash);\n    return result;\n  } catch (error: any) {\n    return false;\n  }\n}\n\nexport async function getEpochData() {\n  try {\n    const result = await provider.getResource('0x1', '0x1::Epoch::Epoch');\n    return result;\n  } catch (error: any) {\n    return false;\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export function pushLocation(params: any, abs = false) {\n  return {\n    type: 'PUSH_LOCATION',\n    params: {\n      path: params,\n      abs\n    }\n  };\n}\n\nexport function goBack() {\n  return {\n    type: 'GO_BACK'\n  };\n}\n","import React, { PureComponent } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport Helmet from 'react-helmet';\nimport { createStyles, withStyles } from '@material-ui/core/styles';\nimport Loading from '@/common/Loading';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport get from 'lodash/get';\nimport { getAddressData } from '@/utils/sdk';\nimport { isHex } from '@/utils/helper';\n\nconst useStyles = () => createStyles({\n  root: {\n    padding: 16,\n  },\n  card: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    padding: 24,\n  },\n  headline: {\n    paddingBottom: 8,\n  },\n});\n\ninterface IndexProps {\n  classes: any;\n  t: any;\n  computedMatch: any;\n  block: any;\n  getBlock: (data: any, callback?: any) => any;\n  transaction: any;\n  getTransaction: (data: any, callback?: any) => any;\n  addressTransactions: any;\n  getAddressTransactions: (data: any, callback?: any) => any;\n  getBlockByHeight: (data: any, callback?: any) => any;\n  pushLocation: (data: any) => any;\n}\n\nclass Index extends PureComponent<IndexProps> {\n  // eslint-disable-next-line react/static-property-placement\n  static defaultProps = {\n    computedMatch: {},\n    block: null,\n    getBlock: () => {},\n    transaction: null,\n    getTransaction: () => {},\n    addressTransactions: null,\n    getAddressTransactions: () => {},\n    getBlockByHeight: () => {},\n    pushLocation: () => {},\n  };\n\n  componentDidMount() {\n    const hash = this.props.computedMatch.params.hash;\n    if (isHex(hash)) {\n      this.props.getBlock({ hash });\n      this.props.getTransaction({ hash });\n      this.props.getAddressTransactions({ hash });\n    } else if (parseInt(hash, 10) >= 0) {\n      this.props.getBlockByHeight({ height: parseInt(hash, 10) });\n    }\n  }\n\n  getAddressData(hash: string) {\n    getAddressData(hash).then(data => {\n      if (data) {\n        if (get(data, 'withdraw_events.guid', '') === hash) {\n          const url = `/address/${hash}`;\n          this.props.pushLocation(url);\n        }\n      }\n    });\n  }\n\n  render() {\n    const { classes, t } = this.props;\n    const hash = this.props.computedMatch.params.hash;\n    const { block, transaction, addressTransactions } = this.props;\n    if (isHex(hash) && (!block || !transaction || !addressTransactions)) {\n      return <Loading />;\n    }\n    let url;\n    let showNone = true;\n\n    if (block && block.hits.hits.length > 0) {\n      if (isHex(hash) && get(block, 'hits.hits[0]._id') === hash) {\n        url = `/blocks/detail/${block.hits.hits[0]._id}`;\n      } else if (get(block, 'hits.hits[0]._source.header.number', undefined) === hash) {\n        url = `/blocks/height/${hash}`;\n      }\n    }\n    if (isHex(hash) && transaction && transaction.hits.hits.length > 0) {\n      if (get(transaction, 'hits.hits[0]._id') === hash) {\n        url = `/transactions/detail/${transaction.hits.hits[0]._id}`;\n      } else {\n        showNone = false;\n      }\n    }\n    if (isHex(hash) && addressTransactions && addressTransactions.hits.hits.length > 0) {\n      this.getAddressData(hash);\n      showNone = false;\n    }\n\n    if (url) {\n      this.props.pushLocation(url);\n      return null;\n    }\n\n    if (!url && showNone) {\n      return (\n        <div>\n          <Helmet>\n            <title>404</title>\n          </Helmet>\n          <Grid className={classes.root} container justify=\"center\">\n            <Grid item xs={12} md={8} lg={4}>\n              <Card className={classes.card}>\n                <Typography variant=\"h5\" className={classes.headline}>\n                  {t('home.searchNotFound')}\n                </Typography>\n                <Typography variant=\"subtitle1\">\n                  {t('home.searchNotFoundDetail')}\n                </Typography>\n              </Card>\n            </Grid>\n          </Grid>\n        </div>\n      );\n    }\n    return <Loading />;\n  }\n}\n\nexport default withStyles(useStyles)(withTranslation()(Index));\n","import { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport createLoadingSelector  from '@/rootStore/loading/selector';\nimport { pushLocation }  from '@/rootStore/router/actions';\nimport storeBlocks from '@/Blocks/store';\nimport storeTransactions from '@/Transactions/store';\nimport * as typesBlocks from '@/Blocks/store/constants';\nimport * as typesTransactions from '@/Transactions/store/constants';\nimport Index from './index';\n\nconst { selector: currentSelectorBlocks, actions: actionsBlocks } = storeBlocks;\nconst { selector: currentSelectorTransactions, actions: actionsTransactions } = storeTransactions;\n\nconst loadingSelector = createLoadingSelector([typesBlocks.GET_BLOCK, typesBlocks.GET_BLOCK_BY_HEIGHT, typesTransactions.GET_TRANSACTION, typesTransactions.GET_ADDRESS_TRANSACTIONS]);\n\nconst selector = createSelector(\n  currentSelectorBlocks,\n  currentSelectorTransactions,\n  loadingSelector,\n  (currentBlocks, currentTransactions, loading) => ({\n    block: currentBlocks.block,\n    transaction: currentTransactions.transaction,\n    addressTransactions: currentTransactions.addressTransactions,\n    loading\n  })\n);\n\nexport default connect(selector, {\n  getBlock: actionsBlocks.getBlock,\n  getTransaction: actionsTransactions.getTransaction,\n  getAddressTransactions: actionsTransactions.getAddressTransactions,\n  getBlockByHeight: actionsBlocks.getBlockByHeight,\n  pushLocation\n})(Index) as any;"],"sourceRoot":""}